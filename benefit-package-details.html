<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Benefit Package - VLINKPAY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="global.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        .create-package-layout {
            display: grid;
            grid-template-columns: 1fr 440px;
            gap: 32px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .form-column {
            background: #fff;
            border-radius: 16px;
            border: 1px solid var(--grey-200);
            box-shadow: var(--shadow-z1);
            padding: 32px;
        }

        .preview-column {
            position: sticky;
            top: 120px;
            height: fit-content;
        }

        .form-section {
            margin-bottom: 40px;
        }

        .form-section:last-of-type {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--grey-900);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title iconify-icon {
            color: var(--primary-main);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--grey-700);
            margin-bottom: 8px;
        }

        .form-label .required {
            color: #FF5630;
            margin-left: 2px;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--grey-300);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.2s;
        }

        .form-control:hover {
            border-color: var(--grey-400);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-main);
            box-shadow: 0 0 0 3px rgba(0, 167, 111, 0.1);
        }

        .form-control:disabled {
            background: var(--grey-100);
            color: var(--grey-600);
            cursor: not-allowed;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .input-group {
            display: flex;
            gap: 8px;
        }

        .input-group .form-control {
            flex: 1;
        }

        .input-group select {
            width: 140px;
            flex-shrink: 0;
        }

        .form-hint {
            font-size: 12px;
            color: var(--grey-600);
            margin-top: 6px;
        }

        .toggle-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid var(--grey-300);
            border-radius: 8px;
            background: #fff;
        }

        .toggle-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--grey-800);
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: var(--grey-300);
            border-radius: 999px;
            cursor: pointer;
            transition: 0.3s;
        }

        .toggle-switch.active {
            background: var(--primary-main);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 999px;
            transition: 0.3s;
        }

        .toggle-switch.active::after {
            left: 22px;
        }

        .benefit-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .benefit-card {
            background: #fff;
            border: 1px solid var(--grey-200);
            border-radius: 12px;
            padding: 16px;
            position: relative;
        }

        .benefit-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .benefit-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .benefit-icon.icon-dollar {
            background: rgba(0, 167, 111, 0.12);
            color: #00A76F;
        }

        .benefit-icon.icon-cashback {
            background: rgba(0, 167, 111, 0.12);
            color: #00A76F;
        }

        .benefit-icon.icon-discount {
            background: rgba(255, 171, 0, 0.12);
            color: #FFAB00;
        }

        .benefit-icon.icon-gift {
            background: rgba(142, 51, 255, 0.12);
            color: #8E33FF;
        }

        .benefit-icon.icon-group {
            background: rgba(255, 171, 0, 0.12);
            color: #FFAB00;
        }

        .benefit-icon.icon-lounge {
            background: rgba(255, 86, 48, 0.12);
            color: #FF5630;
        }

        .benefit-card-title {
            flex: 1;
            display: flex;
            align-items: baseline;
            gap: 6px;
        }

        .benefit-card-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--grey-900);
        }

        .benefit-card-unit {
            font-size: 12px;
            color: var(--grey-600);
        }

        .benefit-card-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            color: var(--grey-400);
            cursor: pointer;
            transition: 0.2s;
            width: 20px;
            height: 20px;
        }

        .benefit-card-remove:hover {
            color: #FF5630;
        }

        .benefit-card-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--grey-300);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
        }

        .benefit-card-input:focus {
            outline: none;
            border-color: var(--primary-main);
            box-shadow: 0 0 0 3px rgba(0, 167, 111, 0.1);
        }

        .benefit-selector {
            margin-bottom: 16px;
        }

        .empty-benefits {
            text-align: center;
            padding: 40px 20px;
            color: var(--grey-500);
            font-size: 14px;
        }

        .form-footer {
            display: flex;
            gap: 12px;
            padding-top: 32px;
            border-top: 1px solid var(--grey-200);
            margin-top: 32px;
        }

        .btn-outlined {
            flex: 1;
            padding: 12px 24px;
            border-radius: 8px;
            border: 1px solid var(--grey-300);
            background: #fff;
            font-size: 14px;
            font-weight: 600;
            color: var(--grey-800);
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-outlined:hover {
            background: var(--grey-100);
        }

        .btn-primary {
            flex: 1;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            background: var(--primary-main);
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 8px 16px rgba(0, 167, 111, 0.24);
        }

        .btn-primary:hover {
            background: #007B55;
            box-shadow: 0 12px 24px rgba(0, 167, 111, 0.32);
        }

        /* Preview Card Styles */
        .preview-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 32px 28px;
            box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4);
            color: #fff;
            position: relative;
            overflow: hidden;
        }

        .preview-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.15), transparent);
            border-radius: 50%;
        }

        .preview-badges {
            position: absolute;
            top: 0;
            left: 0;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 2;
            pointer-events: none;
        }

        .preview-save-badge {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF5630 100%);
            color: #fff;
            padding: 6px 14px;
            border-radius: 8px 0px 8px 0;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            box-shadow: 0 4px 16px rgba(255, 86, 48, 0.5);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            pointer-events: auto;
            position: relative;
        }


        .preview-popular-badge {
            background: linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%);
            color: #1a1a1a;
            padding: 6px 14px;
            border-radius: 0px 0px 8px 8px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            pointer-events: auto;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }



        .preview-package-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 40px auto 20px;
            font-size: 40px;
            position: relative;
            z-index: 1;
        }

        .preview-package-name {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            margin-bottom: 4px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .preview-package-id {
            font-size: 11px;
            opacity: 0.7;
            margin-bottom: 16px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .preview-price-container {
            text-align: center;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .preview-price {
            font-size: 48px;
            font-weight: 800;
            display: inline;
            position: relative;
            z-index: 1;
        }

        .preview-billing {
            font-size: 16px;
            opacity: 0.8;
            display: inline;
            margin-left: 4px;
            position: relative;
            z-index: 1;
        }

        .preview-benefit-count {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            opacity: 0.8;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .preview-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .preview-benefits {
            position: relative;
            z-index: 1;
            margin-bottom: 24px;
        }

        .preview-benefit {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .preview-benefit-check {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .preview-benefit-check iconify-icon {
            color: #FFAB00;
            font-size: 18px;
        }

        .preview-cta-button {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #FFAB00 0%, #FF8F00 100%);
            color: #1a1a1a;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 16px rgba(255, 171, 0, 0.4);
            position: relative;
            z-index: 1;
        }

        .preview-cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 171, 0, 0.5);
        }

        .status-pill {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .status-draft {
            background: #E5E7EB;
            color: #4B5563;
        }
    </style>
</head>

<body>
    <aside class="sidebar">
        <div class="sidebar-content">
            <div class="logo">
                <span style="font-weight: 800; font-size: 22px; color: #212B36; letter-spacing: -0.5px;">VLINKPAY</span>
            </div>

            <a href="crypto-card-list.html" class="nav-item">
                <div class="nav-icon"><iconify-icon icon="solar:wallet-bold-duotone" width="24"></iconify-icon></div>
                <span>Crypto Card Management</span>
            </a>

            <a href="marketing-tools.html" class="nav-item">
                <div class="nav-icon"><iconify-icon icon="solar:chart-square-bold-duotone" width="24"></iconify-icon>
                </div>
                <span>Marketing Tools</span>
            </a>

            <a href="#" class="nav-item parent-active">
                <div class="nav-icon"><iconify-icon icon="solar:dollar-minimalistic-bold-duotone"
                        width="24"></iconify-icon></div>
                <span>Payment Acceptance</span>
                <iconify-icon icon="eva:chevron-down-fill" style="margin-left: auto; width: 16px;"></iconify-icon>
            </a>
            <div class="submenu">
                <a href="gift-card-payment-box.html" class="sub-item"><span class="dot"></span>Pay with Gift Card</a>
                <a href="crypto-payment-box.html" class="sub-item"><span class="dot"></span>Pay with Crypto</a>
            </div>

            <a href="#" class="nav-item parent-active">
                <div class="nav-icon"><iconify-icon icon="solar:settings-bold-duotone" width="24"></iconify-icon></div>
                <span>Settings</span>
                <iconify-icon icon="eva:chevron-down-fill" style="margin-left: auto; width: 16px;"></iconify-icon>
            </a>
            <div class="submenu">
                <a href="merchant-payment-setup.html" class="sub-item"><span class="dot"></span>Merchant Payment
                    Setup</a>
                <a href="benefits-setup.html" class="sub-item active"><span class="dot"></span>Benefits Setup</a>
            </div>

            <a href="#" class="nav-item">
                <div class="nav-icon"><iconify-icon icon="solar:chart-bold-duotone" width="24"></iconify-icon></div>
                <span>Report</span>
                <iconify-icon icon="eva:chevron-down-fill" style="margin-left: auto; width: 16px;"></iconify-icon>
            </a>
            <div class="submenu">
                <a href="sales-order-list.html" class="sub-item"><span class="dot"></span>Sales Orders</a>
                <a href="card-transaction-history-merchant.html" class="sub-item"><span class="dot"></span>Card
                    Transaction History</a>
            </div>

            <div class="nav-section-title">APPS</div>

            <a href="#" class="nav-item">
                <div class="nav-icon"><iconify-icon icon="solar:letter-bold-duotone" width="24"></iconify-icon></div>
                <span>Notifications</span>
                <span class="badge-outlined">32+</span>
            </a>

            <a href="#" class="nav-item">
                <div class="nav-icon"><iconify-icon icon="solar:chat-round-dots-bold-duotone" width="24"></iconify-icon>
                </div>
                <span>AI Assistant</span>
            </a>
        </div>
    </aside>

    <header class="top-header">
        <div class="header-info">Jan 14, 2026 10:05:45 AM (UTC)</div>
        <div class="header-icons">
            <div class="header-icon-btn">
                <iconify-icon icon="solar:settings-bold-duotone" width="24"></iconify-icon>
            </div>
            <div class="user-avatar-mini">
                <iconify-icon icon="solar:user-circle-bold" width="32"></iconify-icon>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="page-header">
            <a href="benefits-setup.html" class="back-btn">
                <iconify-icon icon="eva:arrow-ios-back-fill" width="18"></iconify-icon>
                Back
            </a>
            <h1 class="page-title">Create Benefit Package</h1>
            <div class="breadcrumbs">
                <a href="#">Dashboard</a>
                <span class="breadcrumbs-dot"></span>
                <a href="#">Settings</a>
                <span class="breadcrumbs-dot"></span>
                <a href="benefits-setup.html">Benefits Setup</a>
                <span class="breadcrumbs-dot"></span>
                <span style="color: var(--grey-900); font-weight: 500;">Create Package</span>
            </div>
        </div>

        <div class="create-package-layout">
            <!-- Left Column: Form -->
            <div class="form-column">
                <form id="packageForm">
                    <!-- Basic Information Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <iconify-icon icon="solar:document-text-bold-duotone" width="24"></iconify-icon>
                            Basic Information
                        </h3>

                        <div class="form-group">
                            <label class="form-label">
                                Package Name
                                <span class="required">*</span>
                            </label>
                            <input type="text" class="form-control" id="packageName" placeholder="Enter package name"
                                value="Welcome Package">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Package ID</label>
                            <input type="text" class="form-control" id="packageId" value="PKG001" disabled>
                            <p class="form-hint">Auto-generated upon creation</p>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="form-group">
                                <label class="form-label">
                                    Price
                                    <span class="required">*</span>
                                </label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="price" placeholder="0.00" value="99"
                                        min="0" step="0.01">
                                    <select class="form-control" id="currency">
                                        <option value="USD" selected>USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="VND">VND</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">
                                    Billing Cycle
                                    <span class="required">*</span>
                                </label>
                                <select class="form-control" id="billingCycle">
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly" selected>Yearly</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Benefits Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <iconify-icon icon="solar:gift-bold-duotone" width="24"></iconify-icon>
                            Benefits
                            <span style="font-size: 13px; font-weight: 500; color: var(--grey-600); margin-left: auto;">
                                <span id="benefitCount">3</span> benefits
                            </span>
                        </h3>

                        <div class="benefit-selector">
                            <label class="form-label">Select Benefit</label>
                            <select class="form-control" id="benefitSelect">
                                <option value="">Select Benefit</option>
                                <option value="monthly-credit">Monthly Credit ($)</option>
                                <option value="cashback">Cashback (%)</option>
                                <option value="discount">Discount (%)</option>
                                <option value="birthday-gift">Birthday Gift</option>
                                <option value="group-discount">Group Discount</option>
                                <option value="free-lounge">Free Lounge</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Selected Benefits</label>
                            <div class="benefit-items" id="benefitList">
                                <div class="benefit-card" data-benefit-id="monthly-credit">
                                    <iconify-icon icon="eva:close-circle-fill" class="benefit-card-remove"
                                        width="20"></iconify-icon>
                                    <div class="benefit-card-header">
                                        <div class="benefit-icon icon-dollar">
                                            <iconify-icon icon="solar:dollar-minimalistic-bold-duotone"></iconify-icon>
                                        </div>
                                        <div class="benefit-card-title">
                                            <div class="benefit-card-name">Monthly Credit</div>
                                            <div class="benefit-card-unit">($)</div>
                                        </div>
                                    </div>
                                    <input type="number" class="benefit-card-input" placeholder="25" value="25">
                                </div>

                                <div class="benefit-card" data-benefit-id="cashback">
                                    <iconify-icon icon="eva:close-circle-fill" class="benefit-card-remove"
                                        width="20"></iconify-icon>
                                    <div class="benefit-card-header">
                                        <div class="benefit-icon icon-cashback">
                                            <iconify-icon icon="solar:refresh-bold-duotone"></iconify-icon>
                                        </div>
                                        <div class="benefit-card-title">
                                            <div class="benefit-card-name">Cashback</div>
                                            <div class="benefit-card-unit">(%)</div>
                                        </div>
                                    </div>
                                    <input type="number" class="benefit-card-input" placeholder="12" value="12">
                                </div>

                                <div class="benefit-card" data-benefit-id="discount">
                                    <iconify-icon icon="eva:close-circle-fill" class="benefit-card-remove"
                                        width="20"></iconify-icon>
                                    <div class="benefit-card-header">
                                        <div class="benefit-icon icon-discount">
                                            <iconify-icon icon="eva:percent-outline"></iconify-icon>
                                        </div>
                                        <div class="benefit-card-title">
                                            <div class="benefit-card-name">Discount</div>
                                            <div class="benefit-card-unit">(%)</div>
                                        </div>
                                    </div>
                                    <input type="number" class="benefit-card-input" placeholder="10" value="10">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Footer -->
                    <div class="form-footer">
                        <button type="button" class="btn-outlined" id="saveDraftBtn">
                            Save as Draft
                        </button>
                        <button type="submit" class="btn-primary" id="createActivateBtn">
                            Create & Activate
                        </button>
                    </div>
                </form>
            </div>

            <!-- Right Column: Live Preview -->
            <div class="preview-column">
                <!-- Marketing Section -->
                <div class="form-section"
                    style="background: #fff; border-radius: 16px; padding: 24px; box-shadow: var(--shadow-z1); margin-bottom: 24px;">
                    <h3 class="section-title">
                        <iconify-icon icon="solar:chart-square-bold-duotone" width="24"></iconify-icon>
                        Marketing
                    </h3>

                    <div class="form-group">
                        <label class="form-label">Discount Percentage</label>
                        <input type="number" class="form-control" id="discountPercent" placeholder="0" value="20"
                            min="0" max="100">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Badge Label</label>
                        <input type="text" class="form-control" id="badgeLabel" placeholder="e.g., SAVE 10%"
                            value="Save 20%">
                    </div>

                    <div class="form-group">
                        <div class="toggle-field">
                            <span class="toggle-label">Mark as Most Popular</span>
                            <div class="toggle-switch active" id="mostPopularToggle"></div>
                        </div>
                    </div>
                </div>

                <div class="preview-card">
                    <div class="preview-badges">
                        <span class="preview-save-badge" id="previewSaveBadge">
                            <iconify-icon icon="solar:sale-bold" width="14"></iconify-icon>
                            Save 20%
                        </span>
                        <span class="preview-popular-badge" id="previewPopularBadge">
                            <iconify-icon icon="solar:star-bold" width="14"></iconify-icon>
                            Most popular
                        </span>
                    </div>

                    <div class="preview-package-icon" id="previewPackageIcon">
                        <iconify-icon icon="solar:gift-bold-duotone" width="48"></iconify-icon>
                    </div>

                    <div class="preview-package-name" id="previewPackageName">Welcome Package</div>

                    <div class="preview-price-container">
                        <span class="preview-price" id="previewPrice">$99</span>
                        <span class="preview-billing" id="previewBilling">/yr</span>
                    </div>

                    <div class="preview-benefit-count" id="previewBenefitCount">3 benefits</div>

                    <div class="preview-divider"></div>

                    <div class="preview-benefits" id="previewBenefits">
                        <div class="preview-benefit">
                            <span class="preview-benefit-check">
                                <iconify-icon icon="eva:checkmark-fill"></iconify-icon>
                            </span>
                            <span>Monthly credit bonus for active members</span>
                        </div>
                        <div class="preview-benefit">
                            <span class="preview-benefit-check">
                                <iconify-icon icon="eva:checkmark-fill"></iconify-icon>
                            </span>
                            <span>Exclusive discount across partner stores</span>
                        </div>
                        <div class="preview-benefit">
                            <span class="preview-benefit-check">
                                <iconify-icon icon="eva:checkmark-fill"></iconify-icon>
                            </span>
                            <span>Birthday gift for registered customers</span>
                        </div>
                    </div>

                    <button class="preview-cta-button" id="previewCtaButton">
                        Get Started
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Sidebar toggle functionality
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function (e) {
                const hasSubmenu = this.nextElementSibling?.classList.contains('submenu');
                if (hasSubmenu) {
                    e.preventDefault();
                    this.classList.toggle('active');
                }
            });
        });

        // Initialize active states
        document.querySelectorAll('.nav-item.parent-active').forEach(item => {
            item.classList.add('active');
        });

        // Live Preview Updates
        let mostPopular = true;

        function updatePreview() {
            const packageName = document.getElementById('packageName').value || 'Package Name';
            const packageId = document.getElementById('packageId').value || 'PKG001';
            const price = document.getElementById('price').value || '0';
            const currency = document.getElementById('currency').value;
            const billingCycle = document.getElementById('billingCycle').value;
            const badgeLabel = document.getElementById('badgeLabel').value || 'SAVE 10%';

            // Currency symbols
            const currencySymbols = { USD: '$', EUR: '€', VND: '₫' };
            const symbol = currencySymbols[currency] || currency;

            // Billing display
            const billingDisplay = billingCycle === 'monthly' ? '/mo' : '/yr';

            // Update preview
            document.getElementById('previewPackageName').textContent = packageName;
            document.getElementById('previewPackageId').textContent = `Package ID: ${packageId}`;
            document.getElementById('previewPrice').textContent = `${symbol}${price}`;
            document.getElementById('previewBilling').textContent = billingDisplay;

            // Update save badge with icon
            const saveBadge = document.getElementById('previewSaveBadge');
            saveBadge.innerHTML = `<iconify-icon icon="solar:sale-bold" width="14"></iconify-icon>${badgeLabel}`;

            document.getElementById('previewPopularBadge').style.display = mostPopular ? 'inline-flex' : 'none';

            updateBenefitPreview();
        }

        function updateBenefitPreview() {
            const benefitCards = document.querySelectorAll('#benefitList .benefit-card');
            const count = benefitCards.length;

            document.getElementById('benefitCount').textContent = count;
            document.getElementById('previewBenefitCount').textContent = `${count} benefit${count !== 1 ? 's' : ''}`;

            const previewBenefits = document.getElementById('previewBenefits');
            previewBenefits.innerHTML = '';

            benefitCards.forEach(card => {
                const name = card.querySelector('.benefit-card-name').textContent;
                const unit = card.querySelector('.benefit-card-unit').textContent;
                const value = card.querySelector('.benefit-card-input').value;
                const displayText = value ? `${name}: ${value}${unit}` : name;

                const benefitDiv = document.createElement('div');
                benefitDiv.className = 'preview-benefit';
                benefitDiv.innerHTML = `
                    <span class="preview-benefit-check">
                        <iconify-icon icon="eva:checkmark-fill"></iconify-icon>
                    </span>
                    <span>${displayText}</span>
                `;
                previewBenefits.appendChild(benefitDiv);
            });
        }

        // Form field listeners
        document.getElementById('packageName').addEventListener('input', updatePreview);
        document.getElementById('price').addEventListener('input', updatePreview);
        document.getElementById('currency').addEventListener('change', updatePreview);
        document.getElementById('billingCycle').addEventListener('change', updatePreview);
        document.getElementById('badgeLabel').addEventListener('input', updatePreview);

        // Most Popular Toggle
        document.getElementById('mostPopularToggle').addEventListener('click', function () {
            this.classList.toggle('active');
            mostPopular = this.classList.contains('active');
            updatePreview();
        });

        // Benefit definitions
        const benefitDefinitions = {
            'monthly-credit': {
                name: 'Monthly Credit',
                unit: '($)',
                icon: 'solar:dollar-minimalistic-bold-duotone',
                iconClass: 'icon-dollar',
                placeholder: '25',
                description: 'Monthly credit bonus'
            },
            'cashback': {
                name: 'Cashback',
                unit: '(%)',
                icon: 'solar:refresh-bold-duotone',
                iconClass: 'icon-cashback',
                placeholder: '12',
                description: 'Cashback percentage'
            },
            'discount': {
                name: 'Discount',
                unit: '(%)',
                icon: 'eva:percent-outline',
                iconClass: 'icon-discount',
                placeholder: '10',
                description: 'Discount percentage'
            },
            'birthday-gift': {
                name: 'Birthday Gift',
                unit: '',
                icon: 'material-symbols:cake',
                iconClass: 'icon-gift',
                placeholder: '$50 Voucher',
                description: 'Birthday gift voucher'
            },
            'group-discount': {
                name: 'Group Discount',
                unit: '',
                icon: 'eva:people-fill',
                iconClass: 'icon-group',
                placeholder: '5% for 3+',
                description: 'Group discount rate'
            },
            'free-lounge': {
                name: 'Free Lounge',
                unit: '',
                icon: 'solar:sofa-3-bold-duotone',
                iconClass: 'icon-lounge',
                placeholder: 'Unlimited',
                description: 'Free lounge access'
            }
        };

        // Add Benefit from dropdown
        document.getElementById('benefitSelect').addEventListener('change', function () {
            const benefitId = this.value;
            if (!benefitId) return;

            // Check if benefit already added
            if (document.querySelector(`[data-benefit-id="${benefitId}"]`)) {
                alert('This benefit is already added');
                this.value = '';
                return;
            }

            const benefit = benefitDefinitions[benefitId];
            const benefitList = document.getElementById('benefitList');
            const benefitCard = document.createElement('div');
            benefitCard.className = 'benefit-card';
            benefitCard.setAttribute('data-benefit-id', benefitId);
            benefitCard.innerHTML = `
                <iconify-icon icon="eva:close-circle-fill" class="benefit-card-remove" width="20"></iconify-icon>
                <div class="benefit-card-header">
                    <div class="benefit-icon ${benefit.iconClass}">
                        <iconify-icon icon="${benefit.icon}"></iconify-icon>
                    </div>
                    <div class="benefit-card-title">
                        <div class="benefit-card-name">${benefit.name}</div>
                        <div class="benefit-card-unit">${benefit.unit}</div>
                    </div>
                </div>
                <input type="text" class="benefit-card-input" placeholder="${benefit.placeholder}">
            `;
            benefitList.appendChild(benefitCard);
            setupBenefitCardEvents(benefitCard);
            updateBenefitPreview();
            this.value = '';
        });

        // Setup benefit card events
        function setupBenefitCardEvents(card) {
            const removeBtn = card.querySelector('.benefit-card-remove');
            removeBtn.addEventListener('click', function () {
                card.remove();
                updateBenefitPreview();
            });

            const input = card.querySelector('.benefit-card-input');
            input.addEventListener('input', updateBenefitPreview);
        }

        // Initialize existing benefit cards
        document.querySelectorAll('#benefitList .benefit-card').forEach(setupBenefitCardEvents);



        // Form Submit
        document.getElementById('packageForm').addEventListener('submit', function (e) {
            e.preventDefault();
            alert('Package created and activated successfully!');
            window.location.href = 'benefits-setup.html';
        });

        // Save Draft
        document.getElementById('saveDraftBtn').addEventListener('click', function () {
            alert('Package saved as draft!');
            window.location.href = 'benefits-setup.html';
        });

    </script>
</body>

</html>